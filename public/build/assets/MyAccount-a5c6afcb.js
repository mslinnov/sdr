import{am as j,az as I,l as M,aB as b,at as l,p,q as e,b0 as t,o as d,bm as a,bc as g,bp as B,y as c,bb as u,aU as _,n as L,bk as k,F as T,x as V}from"./runtime-dom.esm-bundler-b0fe8529.js";import{u as A,a as D,I as y,E as P,P as S,b as C,L as E}from"./app-7dc4bf50.js";import{_ as F}from"./AppLayout-80b45f2c.js";/* empty css            */import"./index-121490d3.js";async function O(){const r=document.getElementById("push-permission");if(!r||!("Notification"in window)||!("serviceWorker"in navigator)||Notification.permission!=="default")return;const n=document.createElement("button");n.innerText="Recevoir les notifications",r.appendChild(n),n.addEventListener("click",W)}async function W(){await Notification.requestPermission()==="granted"&&q()}async function q(){const r=await navigator.serviceWorker.register("/sw.js");let n=await r.pushManager.getSubscription();n||(n=await r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:await K()})),await R(n)}async function K(){const{key:r}=await fetch("/push/key",{headers:{Accept:"application/json"}}).then(n=>n.json());return r}async function R(r){await fetch("/push/subscribe",{method:"post",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)})}const $=e("div",{class:"w-full p-4"},[e("h2",{class:"text-center"},"Paramètre du compte")],-1),z={class:"flex flex-col gap-4 items-center px-10"},J=["src","alt"],X=["onSubmit"],G={class:"my-account-input-box"},H={class:"inline-flex gap-2 items-center"},Q=e("label",{for:"firstname",class:"text-primary"},"Prénom",-1),Y={key:0,class:"input-error"},Z={class:"my-account-input-box"},ee={class:"inline-flex gap-2 items-center"},te=e("label",{for:"lastname",class:"text-primary"},"Nom",-1),se={key:0,class:"input-error"},oe={class:"my-account-input-box"},ie={class:"inline-flex gap-2 items-center"},ne=e("label",{for:"email",class:"text-primary"},"Email",-1),ae={key:0,class:"input-error"},re={class:"my-account-input-box"},le={class:"inline-flex gap-2 items-center"},ce=e("label",{for:"phone",class:"text-primary"},"Téléphone",-1),pe={key:0,class:"input-error"},de={class:"my-account-input-box"},ue={class:"inline-flex gap-2 items-center"},me=e("label",{for:"password",class:"text-primary"},"Mot de passe",-1),_e={class:"my-account-input-box"},fe={class:"inline-flex gap-2 items-center"},he=e("label",{for:"password_confirmation",class:"text-primary"},"Confirmation",-1),ye={key:0,class:"input-error"},ve=e("button",{class:"btn-primary-rounded w-2/3 md:w-2/3 text-center",type:"submit"}," Sauvegarder ",-1),xe={class:"w-full flex flex-col items-center gap-4"},we={class:"my-account-input-box"},be={class:"inline-flex gap-2 items-center"},ge=e("label",{for:"show_firstname",class:"text-primary"},"Prénom",-1),ke={class:"my-account-input-box"},Ve={class:"inline-flex gap-2 items-center"},Pe=e("label",{for:"show_lastname",class:"text-primary"},"Nom",-1),Se={key:0,class:"input-error"},Ce={class:"my-account-input-box"},Ee={class:"inline-flex gap-2 items-center"},Ne=e("label",{for:"show_email",class:"text-primary"},"Email",-1),Ue={key:0,class:"input-error"},je={class:"my-account-input-box"},Ie={class:"inline-flex gap-2 items-center"},Me=e("label",{for:"show_phone",class:"text-primary"},"Téléphone",-1),Be={key:0,class:"input-error"},Le={class:"flex flex-col gap-4 items-center p-10"},Te=e("div",{id:"push-permission"},null,-1),Ae={layout:F},Ke=Object.assign(Ae,{__name:"MyAccount",setup(r){j(()=>{O()});const n=I({profil:!1}),x=A(),m=M(()=>x.props.value.user),s=D({first_name:m.value.first_name,last_name:m.value.last_name,email:m.value.email,phone:m.value.phone,password:m.value.password,password_confirmation:null}),N=()=>s.put(`/user/${x.props.value.user.id}`);function w(){n.profil=!n.profil}const v=b(!1),h=b(null);window.addEventListener("beforeinstallprompt",f=>{f.preventDefault(),h.value=f,v.value=!0});function U(){h.value.prompt(),h.value.userChoice.then(f=>{f.outcome==="accepted"?console.log("L'application a été installée."):console.log("L'application n'a pas été installée."),v.value=!1,h.value=null})}return(f,o)=>(l(),p(T,null,[$,e("div",z,[t(m).image[0]?(l(),p("img",{key:0,src:t(m).image[0].src,alt:"Photo de profil du joueur "+t(m).first_name,class:"h-40 w-40 rounded-full object-cover object-top"},null,8,J)):d("",!0),a(e("form",{class:"w-full flex flex-col items-center gap-4",onSubmit:B(N,["prevent"])},[e("div",G,[e("div",H,[c(t(y),{class:"icon-primary"}),Q]),a(e("input",{id:"firstname",class:"edit-input","onUpdate:modelValue":o[0]||(o[0]=i=>t(s).first_name=i),type:"text"},null,512),[[u,t(s).first_name]]),t(s).errors.first_name?(l(),p("div",Y,_(t(s).errors.first_name),1)):d("",!0)]),e("div",Z,[e("div",ee,[c(t(y),{class:"icon-primary"}),te]),a(e("input",{id:"lastname",class:"edit-input","onUpdate:modelValue":o[1]||(o[1]=i=>t(s).last_name=i),type:"text"},null,512),[[u,t(s).last_name]]),t(s).errors.last_name?(l(),p("div",se,_(t(s).errors.last_name),1)):d("",!0)]),e("div",oe,[e("div",ie,[c(t(P),{class:"icon-primary"}),ne]),a(e("input",{id:"email",class:"edit-input","onUpdate:modelValue":o[2]||(o[2]=i=>t(s).email=i),type:"text"},null,512),[[u,t(s).email]]),t(s).errors.email?(l(),p("div",ae,_(t(s).errors.email),1)):d("",!0)]),e("div",re,[e("div",le,[c(t(S),{class:"icon-primary"}),ce]),a(e("input",{id:"phone",class:"edit-input","onUpdate:modelValue":o[3]||(o[3]=i=>t(s).phone=i),type:"tel"},null,512),[[u,t(s).phone]]),t(s).errors.phone?(l(),p("div",pe,_(t(s).errors.phone),1)):d("",!0)]),e("div",de,[e("div",ue,[c(t(C),{class:"icon-primary"}),me]),a(e("input",{id:"password",class:"edit-input","onUpdate:modelValue":o[4]||(o[4]=i=>t(s).password=i),type:"password",placeholder:"********"},null,512),[[u,t(s).password]])]),e("div",_e,[e("div",fe,[c(t(C),{class:"icon-primary"}),he]),a(e("input",{id:"password_confirmation",class:"edit-input","onUpdate:modelValue":o[5]||(o[5]=i=>t(s).password_confirmation=i),type:"password",placeholder:"********"},null,512),[[u,t(s).password_confirmation]])]),t(s).errors.password?(l(),p("div",ye,_(t(s).errors.password),1)):d("",!0),e("div",{class:"flex gap-4 items-center w-full md:w-1/2"},[ve,e("button",{class:"alert-primary-rounded w-2/3 md:w-2/3 text-center",type:"button",onClick:w}," Annuler ")])],40,X),[[g,n.profil]]),a(e("section",xe,[e("div",we,[e("div",be,[c(t(y),{class:"icon-primary"}),ge]),a(e("input",{id:"show_firstname",class:"no-edit-input","onUpdate:modelValue":o[6]||(o[6]=i=>t(s).first_name=i),type:"text"},null,512),[[u,t(s).first_name]])]),e("div",ke,[e("div",Ve,[c(t(y),{class:"icon-primary"}),Pe]),a(e("input",{id:"show_lastname",class:"no-edit-input","onUpdate:modelValue":o[7]||(o[7]=i=>t(s).last_name=i),type:"text"},null,512),[[u,t(s).last_name]]),t(s).errors.last_name?(l(),p("div",Se,_(t(s).errors.last_name),1)):d("",!0)]),e("div",Ce,[e("div",Ee,[c(t(P),{class:"icon-primary"}),Ne]),a(e("input",{id:"show_email",class:"no-edit-input","onUpdate:modelValue":o[8]||(o[8]=i=>t(s).email=i),type:"text"},null,512),[[u,t(s).email]]),t(s).errors.email?(l(),p("div",Ue,_(t(s).errors.email),1)):d("",!0)]),e("div",je,[e("div",Ie,[c(t(S),{class:"icon-primary"}),Me]),a(e("input",{id:"show_phone",class:"no-edit-input","onUpdate:modelValue":o[9]||(o[9]=i=>t(s).phone=i),type:"tel"},null,512),[[u,t(s).phone]]),t(s).errors.phone?(l(),p("div",Be,_(t(s).errors.phone),1)):d("",!0)]),e("div",{class:"flex flex-col items-center w-full md:w-1/2"},[e("button",{class:"btn-primary-rounded w-2/3 md:w-2/3 text-center",type:"button",onClick:w}," Modifier ")])],512),[[g,!n.profil]])]),e("div",Le,[e("div",null,[v.value?(l(),L(t(E),{key:0,class:"text-center text-md",onClick:U},{default:k(()=>[V(" Installer l'application ")]),_:1})):d("",!0)]),Te,e("div",null,[c(t(E),{class:"text-center text-xs",href:f.route("logout"),method:"delete",as:"button"},{default:k(()=>[V(" Déconnexion ")]),_:1},8,["href"])])])],64))}});export{Ke as default};
