import{at as s,p as r,y as k,b0 as m,q as t,aF as h,az as b,o as c,F as x,aE as $,bp as j,bk as g,aU as _,bm as C,b9 as q,ad as T,bb as z}from"./runtime-dom.esm-bundler-b0fe8529.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{a as U}from"./app-c850fc18.js";import{C as B}from"./index-25d3fdd2.js";const M={class:"rounded-md shadow-sm text-gray-800 font-medium bg-white p-12 mx-auto mt-6 flex items-center dark:bg-slate-700 dark:text-gray-300"},A=t("p",null,"Nous avons bien reçus ta réponse. Pense à bien remplir tous les formulaires.",-1),L={__name:"SurveyCompleted",setup(d){return(p,l)=>(s(),r("div",M,[k(m(B),{class:"w-24 text-white bg-green-600 rounded-full mr-4"}),A]))}},O={},R={class:"rounded-md px-2 pb-2 shadow-md dark:text-gray-300 bg-white dark:bg-slate-700 flex flex-col items-center gap-4 md:w-96 mx-auto"},W={class:"-mt-4"},D={class:"flex-1 w-full"};function I(d,p){return s(),r("div",R,[t("div",W,[h(d.$slots,"image")]),t("div",D,[h(d.$slots,"title"),h(d.$slots,"default")])])}const P=N(O,[["render",I]]),G={key:0,class:"fixed top-10 mt-2 mr-2 z-20"},H=t("div",{class:"bg-red-500 text-white py-2 px-4 rounded-lg"}," Veuillez sélectionner une réponse pour toutes les questions avant de valider le formulaire. ",-1),J=[H],K={key:1},Q=["id"],X=["src"],Y={class:"dark:text-white text-gray-500 font-medium text-sm text-center"},Z={key:0,class:"flex flex-row justify-evenly pt-3"},E=["id","value","onUpdate:modelValue"],ee=["for"],te={class:"text-xs text-gray-400 font-medium text-white"},se={key:1,class:"w-full flex justify-between pt-1"},re={class:"surveyLegend"},oe={class:"surveyLegend"},ie={key:2},de=["id","onUpdate:modelValue","placeholder"],le=t("button",{type:"submit",class:"btn-primary-rounded mt-4 m-auto w-1/2"}," Submit ",-1),ne={key:2},ae={__name:"SurveyElements",props:{survey:Object},emits:["surveyCompleted"],setup(d,{emit:p}){const l=d,u={};function w(){for(const a in l.survey.survey_elements){const o=l.survey.survey_elements[a];let e="responseSurveyElement_"+o.id;o.formid=e,o.element_type_id===2&&o.survey_input.placeholder?u[e]=o.survey_input.placeholder:u[e]=null}u.surveyId=l.survey.id}w();const f=b({error:!1}),n=b(U(u));console.log("Form : ",n);const V=()=>{const a=l.survey.survey_elements;for(let o=0;o<a.length;o++){const e=a[o];if(e.element_type_id===1){const v=document.querySelector(`#survey_element_${e.id}`).querySelectorAll('input[type="radio"]');if(!Array.from(v).some(F=>F.checked))return!1}}return!0};let S=b({ThisWeek:!1}),y;return y=()=>{V()?(S.ThisWeek=!0,p("surveyCompleted",l.survey.id),n.post(route("survey.store"))):(f.error=!0,setTimeout(()=>{f.error=!1},3e3))},(a,o)=>(s(),r(x,null,[f.error?(s(),r("div",G,J)):c("",!0),m(S).ThisWeek?(s(),r("div",ne,[k(L)])):(s(),r("div",K,[t("form",{onSubmit:o[0]||(o[0]=j((...e)=>m(y)&&m(y)(...e),["prevent"])),class:"flex flex-col items-center"},[(s(!0),r(x,null,$(d.survey.survey_elements,e=>(s(),r("div",{class:"w-full",id:"survey_element_"+e.id,ref_for:!0,ref:"surveyElement"+e.id},[k(P,{class:"mt-8"},{image:g(()=>[t("img",{src:"/image/icon/"+e.survey_input.image,class:"img-survey-create"},null,8,X)]),title:g(()=>[t("div",Y,_(e.survey_input.title),1)]),default:g(()=>[e.element_type_id===1?(s(),r("div",Z,[(s(),r(x,null,$(10,i=>t("div",null,[C((s(),r("input",{type:"radio",required:!0,id:"id_"+e.id+"_"+i,value:i,key:i,"onUpdate:modelValue":v=>n[e.formid]=v,class:"hidden peer cursor-pointer"},null,8,E)),[[q,n[e.formid]]]),t("label",{for:"id_"+e.id+"_"+i,class:T(["flex items-center flex-col justify-between w-7 text-center rounded-full p-1 cursor-pointer border-2 drop-shadow-sm dark:hover:text-gray-300 border-white dark:border-slate-700 hover:text-gray-600 dark:text-gray-400 hover:bg-blue-500 peer-checked:border-blue-500 peer-checked:border-2 peer-checked:bg-blue-600","survey-scale-selector-"+i]),onClick:w},[t("div",te,_(i),1)],10,ee)])),64))])):c("",!0),e.element_type_id===1?(s(),r("div",se,[t("div",re,_(e.survey_input.legend_1),1),t("div",oe,_(e.survey_input.legend_10),1)])):c("",!0),e.element_type_id===2?(s(),r("div",ie,[C(t("input",{type:"text",id:"id_"+e.id,"onUpdate:modelValue":i=>n[e.formid]=i,class:"form-input mt-4",placeholder:e.survey_input.placeholder,required:""},null,8,de),[[z,n[e.formid]]])])):c("",!0)]),_:2},1024)],8,Q))),256)),le],32)]))],64))}},fe=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{fe as S,ae as _,L as a};
