import{at as s,p as r,y as w,b0 as m,q as t,aF as h,az as b,o as c,F as x,aE as $,bp as j,bk as g,aU as _,bm as C,b9 as q,ad as T,bb as z}from"./runtime-dom.esm-bundler-b0fe8529.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{a as U}from"./app-51f2ac39.js";import{C as B}from"./index-1f87ec5d.js";const M={class:"rounded-md shadow-sm text-gray-800 font-medium bg-white p-12 mx-auto mt-6 flex items-center"},A=t("p",null,"Nous avons bien reçus ta réponse. Pense à bien remplir tous les formulaires.",-1),L={__name:"SurveyCompleted",setup(l){return(p,d)=>(s(),r("div",M,[w(m(B),{class:"w-24 text-white bg-green-600 rounded-full mr-4"}),A]))}},O={},R={class:"rounded-md px-2 pb-2 shadow-md bg-white flex flex-col items-center gap-4 md:w-96 mx-auto"},W={class:"-mt-4"},D={class:"flex-1 w-full"};function I(l,p){return s(),r("div",R,[t("div",W,[h(l.$slots,"image")]),t("div",D,[h(l.$slots,"title"),h(l.$slots,"default")])])}const P=N(O,[["render",I]]),G={key:0,class:"fixed top-10 mt-2 mr-2 z-20"},H=t("div",{class:"bg-red-500 text-white py-2 px-4 rounded-lg"}," Veuillez sélectionner une réponse pour toutes les questions avant de valider le formulaire. ",-1),J=[H],K={key:1},Q=["id"],X=["src"],Y={class:"text-gray-500 font-medium text-sm text-center"},Z={key:0,class:"flex flex-row justify-evenly pt-3"},E=["id","value","onUpdate:modelValue"],ee=["for"],te={class:"text-xs text-gray-400 font-medium text-white"},se={key:1,class:"w-full flex justify-between pt-1"},re={class:"surveyLegend"},oe={class:"surveyLegend"},ie={key:2},le=["id","onUpdate:modelValue","placeholder"],de=t("button",{type:"submit",class:"btn-primary-rounded mt-4 m-auto w-1/2"}," Submit ",-1),ne={key:2},ue={__name:"SurveyElements",props:{survey:Object},emits:["surveyCompleted"],setup(l,{emit:p}){const d=l,a={};function k(){for(const u in d.survey.survey_elements){const o=d.survey.survey_elements[u];let e="responseSurveyElement_"+o.id;o.formid=e,o.element_type_id===2&&o.survey_input.placeholder?a[e]=o.survey_input.placeholder:a[e]=null}a.surveyId=d.survey.id}k();const f=b({error:!1}),n=b(U(a));console.log("Form : ",n);const V=()=>{const u=d.survey.survey_elements;for(let o=0;o<u.length;o++){const e=u[o];if(e.element_type_id===1){const y=document.querySelector(`#survey_element_${e.id}`).querySelectorAll('input[type="radio"]');if(!Array.from(y).some(F=>F.checked))return!1}}return!0};let S=b({ThisWeek:!1}),v;return v=()=>{V()?(S.ThisWeek=!0,p("surveyCompleted",d.survey.id),n.post(route("survey.store"))):(f.error=!0,setTimeout(()=>{f.error=!1},3e3))},(u,o)=>(s(),r(x,null,[f.error?(s(),r("div",G,J)):c("",!0),m(S).ThisWeek?(s(),r("div",ne,[w(L)])):(s(),r("div",K,[t("form",{onSubmit:o[0]||(o[0]=j((...e)=>m(v)&&m(v)(...e),["prevent"])),class:"flex flex-col items-center"},[(s(!0),r(x,null,$(l.survey.survey_elements,e=>(s(),r("div",{class:"w-full",id:"survey_element_"+e.id,ref_for:!0,ref:"surveyElement"+e.id},[w(P,{class:"mt-8"},{image:g(()=>[t("img",{src:"/image/icon/"+e.survey_input.image,class:"img-survey-create"},null,8,X)]),title:g(()=>[t("div",Y,_(e.survey_input.title),1)]),default:g(()=>[e.element_type_id===1?(s(),r("div",Z,[(s(),r(x,null,$(10,i=>t("div",null,[C((s(),r("input",{type:"radio",required:!0,id:"id_"+e.id+"_"+i,value:i,key:i,"onUpdate:modelValue":y=>n[e.formid]=y,class:"hidden peer cursor-pointer"},null,8,E)),[[q,n[e.formid]]]),t("label",{for:"id_"+e.id+"_"+i,class:T(["flex items-center flex-col justify-between w-7 text-center rounded-full p-1 cursor-pointer border-2 drop-shadow-sm border-white hover:text-gray-600 hover:bg-blue-500 peer-checked:border-blue-500 peer-checked:border-2 peer-checked:bg-blue-600","survey-scale-selector-"+i]),onClick:k},[t("div",te,_(i),1)],10,ee)])),64))])):c("",!0),e.element_type_id===1?(s(),r("div",se,[t("div",re,_(e.survey_input.legend_1),1),t("div",oe,_(e.survey_input.legend_10),1)])):c("",!0),e.element_type_id===2?(s(),r("div",ie,[C(t("input",{type:"text",id:"id_"+e.id,"onUpdate:modelValue":i=>n[e.formid]=i,class:"form-input mt-4",placeholder:e.survey_input.placeholder,required:""},null,8,le),[[z,n[e.formid]]])])):c("",!0)]),_:2},1024)],8,Q))),256)),de],32)]))],64))}},fe=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{fe as S,ue as _,L as a};
