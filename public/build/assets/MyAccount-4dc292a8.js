import{am as U,az as j,l as M,aB as b,at as l,p,q as e,b0 as t,o as d,bm as a,bc as g,bp as L,y as c,bb as u,aU as _,n as T,bk as k,F as B,x as S}from"./runtime-dom.esm-bundler-b0fe8529.js";import{u as O,a as A,I as y,E as V,P,b as E,L as I}from"./app-bd1a74f3.js";import{_ as F}from"./AppLayout-edacd226.js";/* empty css            */import"./index-1a3f6f09.js";async function D(){const r=document.getElementById("push-permission");if(!r||!("Notification"in window)||!("serviceWorker"in navigator))return;const i=document.createElement("button");i.innerText="Recevoir les notifications",r.appendChild(i),i.addEventListener("click",K)}async function K(){print("ASK PERMISSION FOR NOTIF"),await Notification.requestPermission()==="granted"&&R()}async function R(){const r=await navigator.serviceWorker.register("/sw.js");let i=await r.pushManager.getSubscription();i||(i=await r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:await W()})),console.log(i),await q(i)}async function W(){const{key:r}=await fetch("/push/key",{headers:{Accept:"application/json"}}).then(i=>i.json());return r}async function q(r){await fetch("/push/subscribe",{method:"post",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)})}const $=e("div",{class:"w-full p-4"},[e("h2",{class:"text-center"},"Paramètre du compte")],-1),z={class:"flex flex-col gap-4 items-center px-10"},J=["src","alt"],X=["onSubmit"],G={class:"my-account-input-box"},H={class:"inline-flex gap-2 items-center"},Q=e("label",{for:"firstname",class:"text-primary"},"Prénom",-1),Y={key:0,class:"input-error"},Z={class:"my-account-input-box"},ee={class:"inline-flex gap-2 items-center"},te=e("label",{for:"lastname",class:"text-primary"},"Nom",-1),se={key:0,class:"input-error"},oe={class:"my-account-input-box"},ne={class:"inline-flex gap-2 items-center"},ie=e("label",{for:"email",class:"text-primary"},"Email",-1),ae={key:0,class:"input-error"},re={class:"my-account-input-box"},le={class:"inline-flex gap-2 items-center"},ce=e("label",{for:"phone",class:"text-primary"},"Téléphone",-1),pe={key:0,class:"input-error"},de={class:"my-account-input-box"},ue={class:"inline-flex gap-2 items-center"},me=e("label",{for:"password",class:"text-primary"},"Mot de passe",-1),_e={class:"my-account-input-box"},fe={class:"inline-flex gap-2 items-center"},he=e("label",{for:"password_confirmation",class:"text-primary"},"Confirmation",-1),ye={key:0,class:"input-error"},ve=e("button",{class:"btn-primary-rounded w-2/3 md:w-2/3 text-center",type:"submit"}," Sauvegarder ",-1),xe={class:"w-full flex flex-col items-center gap-4"},we={class:"my-account-input-box"},be={class:"inline-flex gap-2 items-center"},ge=e("label",{for:"show_firstname",class:"text-primary"},"Prénom",-1),ke={class:"my-account-input-box"},Se={class:"inline-flex gap-2 items-center"},Ve=e("label",{for:"show_lastname",class:"text-primary"},"Nom",-1),Pe={key:0,class:"input-error"},Ee={class:"my-account-input-box"},Ie={class:"inline-flex gap-2 items-center"},Ne=e("label",{for:"show_email",class:"text-primary"},"Email",-1),Ce={key:0,class:"input-error"},Ue={class:"my-account-input-box"},je={class:"inline-flex gap-2 items-center"},Me=e("label",{for:"show_phone",class:"text-primary"},"Téléphone",-1),Le={key:0,class:"input-error"},Te={class:"flex flex-col gap-4 items-center p-10"},Be=e("div",{id:"push-permission"},null,-1),Oe={layout:F},We=Object.assign(Oe,{__name:"MyAccount",setup(r){U(()=>{D()});const i=j({profil:!1}),x=O(),m=M(()=>x.props.value.user),s=A({first_name:m.value.first_name,last_name:m.value.last_name,email:m.value.email,phone:m.value.phone,password:m.value.password,password_confirmation:null}),N=()=>s.put(`/user/${x.props.value.user.id}`);function w(){i.profil=!i.profil,console.log(i.profil)}const v=b(!1),h=b(null);window.addEventListener("beforeinstallprompt",f=>{console.log("addEventListener"),f.preventDefault(),h.value=f,v.value=!0});function C(){h.value.prompt(),h.value.userChoice.then(f=>{f.outcome==="accepted"?console.log("L'application a été installée."):console.log("L'application n'a pas été installée."),v.value=!1,h.value=null})}return(f,o)=>(l(),p(B,null,[$,e("div",z,[t(m).image[0]?(l(),p("img",{key:0,src:t(m).image[0].src,alt:"Photo de profil du joueur "+t(m).first_name,class:"h-40 w-40 rounded-full object-cover object-top"},null,8,J)):d("",!0),a(e("form",{class:"w-full flex flex-col items-center gap-4",onSubmit:L(N,["prevent"])},[e("div",G,[e("div",H,[c(t(y),{class:"icon-primary"}),Q]),a(e("input",{id:"firstname",class:"edit-input","onUpdate:modelValue":o[0]||(o[0]=n=>t(s).first_name=n),type:"text"},null,512),[[u,t(s).first_name]]),t(s).errors.first_name?(l(),p("div",Y,_(t(s).errors.first_name),1)):d("",!0)]),e("div",Z,[e("div",ee,[c(t(y),{class:"icon-primary"}),te]),a(e("input",{id:"lastname",class:"edit-input","onUpdate:modelValue":o[1]||(o[1]=n=>t(s).last_name=n),type:"text"},null,512),[[u,t(s).last_name]]),t(s).errors.last_name?(l(),p("div",se,_(t(s).errors.last_name),1)):d("",!0)]),e("div",oe,[e("div",ne,[c(t(V),{class:"icon-primary"}),ie]),a(e("input",{id:"email",class:"edit-input","onUpdate:modelValue":o[2]||(o[2]=n=>t(s).email=n),type:"text"},null,512),[[u,t(s).email]]),t(s).errors.email?(l(),p("div",ae,_(t(s).errors.email),1)):d("",!0)]),e("div",re,[e("div",le,[c(t(P),{class:"icon-primary"}),ce]),a(e("input",{id:"phone",class:"edit-input","onUpdate:modelValue":o[3]||(o[3]=n=>t(s).phone=n),type:"tel"},null,512),[[u,t(s).phone]]),t(s).errors.phone?(l(),p("div",pe,_(t(s).errors.phone),1)):d("",!0)]),e("div",de,[e("div",ue,[c(t(E),{class:"icon-primary"}),me]),a(e("input",{id:"password",class:"edit-input","onUpdate:modelValue":o[4]||(o[4]=n=>t(s).password=n),type:"password",placeholder:"********"},null,512),[[u,t(s).password]])]),e("div",_e,[e("div",fe,[c(t(E),{class:"icon-primary"}),he]),a(e("input",{id:"password_confirmation",class:"edit-input","onUpdate:modelValue":o[5]||(o[5]=n=>t(s).password_confirmation=n),type:"password",placeholder:"********"},null,512),[[u,t(s).password_confirmation]])]),t(s).errors.password?(l(),p("div",ye,_(t(s).errors.password),1)):d("",!0),e("div",{class:"flex gap-4 items-center w-full md:w-1/2"},[ve,e("button",{class:"alert-primary-rounded w-2/3 md:w-2/3 text-center",type:"button",onClick:w}," Annuler ")])],40,X),[[g,i.profil]]),a(e("section",xe,[e("div",we,[e("div",be,[c(t(y),{class:"icon-primary"}),ge]),a(e("input",{id:"show_firstname",class:"no-edit-input","onUpdate:modelValue":o[6]||(o[6]=n=>t(s).first_name=n),type:"text"},null,512),[[u,t(s).first_name]])]),e("div",ke,[e("div",Se,[c(t(y),{class:"icon-primary"}),Ve]),a(e("input",{id:"show_lastname",class:"no-edit-input","onUpdate:modelValue":o[7]||(o[7]=n=>t(s).last_name=n),type:"text"},null,512),[[u,t(s).last_name]]),t(s).errors.last_name?(l(),p("div",Pe,_(t(s).errors.last_name),1)):d("",!0)]),e("div",Ee,[e("div",Ie,[c(t(V),{class:"icon-primary"}),Ne]),a(e("input",{id:"show_email",class:"no-edit-input","onUpdate:modelValue":o[8]||(o[8]=n=>t(s).email=n),type:"text"},null,512),[[u,t(s).email]]),t(s).errors.email?(l(),p("div",Ce,_(t(s).errors.email),1)):d("",!0)]),e("div",Ue,[e("div",je,[c(t(P),{class:"icon-primary"}),Me]),a(e("input",{id:"show_phone",class:"no-edit-input","onUpdate:modelValue":o[9]||(o[9]=n=>t(s).phone=n),type:"tel"},null,512),[[u,t(s).phone]]),t(s).errors.phone?(l(),p("div",Le,_(t(s).errors.phone),1)):d("",!0)]),e("div",{class:"flex flex-col items-center w-full md:w-1/2"},[e("button",{class:"btn-primary-rounded w-2/3 md:w-2/3 text-center",type:"button",onClick:w}," Modifier ")])],512),[[g,!i.profil]])]),e("div",Te,[e("div",null,[v.value?(l(),T(t(I),{key:0,class:"text-center text-md",onClick:C},{default:k(()=>[S(" Installer l'application ")]),_:1})):d("",!0)]),Be,e("div",null,[c(t(I),{class:"text-center text-xs",href:f.route("logout"),method:"delete",as:"button"},{default:k(()=>[S(" Déconnexion ")]),_:1},8,["href"])])])],64))}});export{We as default};
